$schema: "https://moonrepo.dev/schemas/project.json"

language: "javascript"

tasks:
  dev:
    command: "pnpm exec nuxi dev"
    preset: "server"
    options:
      cache: false
  build:
    command: "pnpm exec nuxi build"
  preview:
    command: "pnpm exec nuxi preview"
    preset: "server"
    options:
      cache: false
  test:
    command: "pnpm exec vitest run --config vitest.config.ts"
  typecheck:
    command: "pnpm exec nuxi typecheck"
  validate:
    deps:
      - "ui:test"
      - "ui:typecheck"
      - "ui:build"
    options:
      runDepsInParallel: false
  deploy:
    deps:
      - "ui:build"
    command: "pnpm exec wrangler deploy --config wrangler.jsonc"
    options:
      cache: false
